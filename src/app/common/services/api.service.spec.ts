import { TestBed } from '@angular/core/testing';

import { ApiService } from './api.service';
import { UrlService } from './url.service';
import { from } from 'rxjs';

fdescribe('ApiService', () => {
  const mockData = [{
    'flight_number':26,
    'mission_name':'Jason 3',
    'mission_id':[],
    'launch_year':'2016',
    'launch_date_unix':1453045320,
    'launch_date_utc':'2016-01-17T15:42:00.000Z',
    'launch_date_local':'2016-01-17T08:42:00-07:00',
    'is_tentative':false,
    'tentative_max_precision':'hour',
    'tbd':false,
    'launch_window':0,
    'rocket':{'rocket_id':'falcon9',
    'rocket_name':'Falcon 9',
    'rocket_type':'v1.1',
    'first_stage':{'cores':[{'core_serial':'B1017',
    'flight':1,
    'block':1,
    'gridfins':true,
    'legs':true,
    'reused':false,
    'land_success':false,
    'landing_intent':true,
    'landing_type':'ASDS',
    'landing_vehicle':'JRTI'}]},
    'second_stage':{'block':1,
    'payloads':[{'payload_id':'Jason-3',
    'norad_id':[41240],
    'reused':false,
    'customers':['NASA',
    'NOAA'],
    'nationality':'United States',
    'manufacturer':'Thales Alenia Space',
    'payload_type':'Satellite',
    'payload_mass_kg':553,
    'payload_mass_lbs':1219,
    'orbit':'PO',
    'orbit_params':{'reference_system':'geocentric',
    'regime':'low-earth',
    'longitude':null,
    'semi_major_axis_km':7715.868,
    'eccentricity':0.0007733,
    'periapsis_km':1331.766,
    'apoapsis_km':1343.7,
    'inclination_deg':66.0417,
    'period_min':112.418,
    'lifespan_years':5,
    'epoch':'2020-12-21T12:00:50.000Z',
    'mean_motion':12.80930365,
    'raan':336.6363,
    'arg_of_pericenter':269.7508,
    'mean_anomaly':90.2621}}]},
    'fairings':{'reused':false,
    'recovery_attempt':false,
    'recovered':false,
    'ship':null}},
    'ships':['JRTI-2',
    'NRCQUEST',
    'PACIFICFREEDOM'],
    'telemetry':{'flight_club':'https://www.flightclub.io/results/?code=JSN3'},
    'launch_site':{'site_id':'vafb_slc_4e',
    'site_name':'VAFB SLC 4E',
    'site_name_long':'Vandenberg Air Force Base Space Launch Complex 4E'},
    'launch_success':true,
    'links':{'mission_patch':'https://images2.imgbox.com/71/59/j489OwAI_o.png',
    'mission_patch_small':'https://images2.imgbox.com/72/f2/uK9vYzvk_o.png',
    'reddit_campaign':null,
    'reddit_launch':'https://www.reddit.com/r/spacex/comments/417weg',
    'reddit_recovery':null,
    'reddit_media':'https://www.reddit.com/r/spacex/comments/41cvdm',
    'presskit':'http://www.spacex.com/sites/spacex/files/spacex_jason3_press_kit.pdf',
    'article_link':'https://spaceflightnow.com/2016/01/18/satellite-launched-to-measure-motions-of-the-oceans/',
    'wikipedia':'https://en.wikipedia.org/wiki/Jason-3',
    'video_link':'https://www.youtube.com/watch?v=ivdKRJzl6y0',
    'youtube_id':'ivdKRJzl6y0',
    'flickr_images':['https://farm2.staticflickr.com/1460/24382360351_9b1f2fcabc_o.jpg',
    'https://farm2.staticflickr.com/1669/24423604506_27d3c4548b_o.jpg',
    'https://farm2.staticflickr.com/1618/24151425850_1cb6040569_o.jpg',
    'https://farm2.staticflickr.com/1622/24127012370_07edc62046_o.jpg',
    'https://farm2.staticflickr.com/1508/24127011190_92ef932c96_o.jpg',
    'https://farm2.staticflickr.com/1591/23778325594_08231286fc_o.jpg',
    'https://farm2.staticflickr.com/1542/24038722499_34c10216a3_o.jpg']},
    'details':'First launch of NASA and NOAA joint science mission under the NLS II launch contract (not related to NASA CRS or USAF OSP3 contracts). Last launch of the original Falcon 9 v1.1 launch vehicle. The Jason-3 satellite was successfully deployed to target orbit. SpaceX again attempted a recovery of the first stage booster by landing on an autonomous drone ship; this time located in the Pacific Ocean. The first stage did achieve a soft-landing on the ship',
    'upcoming':false,
    'static_fire_date_utc':'2016-01-11T18:42:00.000Z',
    'static_fire_date_unix':1452537720,
    'timeline':{'webcast_liftoff':1309,
    'go_for_prop_loading':-2280,
    'rp1_loading':-2100,
    'stage1_lox_loading':-2100,
    'stage2_lox_loading':-960,
    'engine_chill':-420,
    'prelaunch_checks':-60,
    'propellant_pressurization':-60,
    'go_for_launch':-45,
    'ignition':-3,
    'liftoff':0,
    'maxq':78,
    'meco':154,
    'stage_sep':157,
    'second_stage_ignition':3300,
    'fairing_deploy':3360,
    'first_stage_boostback_burn':265,
    'first_stage_entry_burn':420,
    'seco-1':540,
    'second_stage_restart':3300,
    'payload_deploy':3360},
    'crew':null},
    {'flight_number':27,
    'mission_name':'SES-9',
    'mission_id':['6C42550'],
    'launch_year':'2016',
    'launch_date_unix':1457134500,
    'launch_date_utc':'2016-03-04T23:35:00.000Z',
    'launch_date_local':'2016-03-04T19:35:00-04:00',
    'is_tentative':false,
    'tentative_max_precision':'hour',
    'tbd':false,
    'launch_window':5400,
    'rocket':{'rocket_id':'falcon9',
    'rocket_name':'Falcon 9',
    'rocket_type':'FT',
    'first_stage':{'cores':[{'core_serial':'B1020',
    'flight':1,
    'block':1,
    'gridfins':true,
    'legs':true,
    'reused':false,
    'land_success':false,
    'landing_intent':true,
    'landing_type':'ASDS',
    'landing_vehicle':'OCISLY'}]},
    'second_stage':{'block':1,
    'payloads':[{'payload_id':'SES-9',
    'norad_id':[41380],
    'reused':false,
    'customers':['SES'],
    'nationality':'Luxembourg',
    'manufacturer':'Boeing',
    'payload_type':'Satellite',
    'payload_mass_kg':5271,
    'payload_mass_lbs':11621,
    'orbit':'GTO',
    'orbit_params':{'reference_system':'geocentric',
    'regime':'geostationary',
    'longitude':108.2,
    'semi_major_axis_km':42164.931,
    'eccentricity':0.0000334,
    'periapsis_km':35785.387,
    'apoapsis_km':35788.204,
    'inclination_deg':0.0296,
    'period_min':1436.107,
    'lifespan_years':15,
    'epoch':'2020-12-21T10:57:35.000Z',
    'mean_motion':1.00271075,
    'raan':289.8244,
    'arg_of_pericenter':142.421,
    'mean_anomaly':290.9202}}]},
    'fairings':{'reused':false,
    'recovery_attempt':false,
    'recovered':false,
    'ship':null}},
    'ships':['ELSBETH3',
    'GOQUEST',
    'GOSEARCHER',
    'OCISLY'],
    'telemetry':{'flight_club':'https://www.flightclub.io/results/?code=SES9'},
    'launch_site':{'site_id':'ccafs_slc_40',
    'site_name':'CCAFS SLC 40',
    'site_name_long':'Cape Canaveral Air Force Station Space Launch Complex 40'},
    'launch_success':true,
    'links':{'mission_patch':'https://images2.imgbox.com/f6/aa/xDtGo0WJ_o.png',
    'mission_patch_small':'https://images2.imgbox.com/fa/ef/4FBvVReu_o.png',
    'reddit_campaign':null,
    'reddit_launch':'https://www.reddit.com/r/spacex/comments/48u4yq',
    'reddit_recovery':null,
    'reddit_media':'https://www.reddit.com/r/spacex/comments/472k8c',
    'presskit':'http://www.spacex.com/sites/spacex/files/spacex_ses9_press_kit_final.pdf',
    'article_link':'https://spaceflightnow.com/2016/03/05/tv-broadcasting-satellite-finally-launched-on-falcon-9/',
    'wikipedia':'https://en.wikipedia.org/wiki/SES-9',
    'video_link':'https://www.youtube.com/watch?v=muDPSyO7-A0',
    'youtube_id':'muDPSyO7-A0',
    'flickr_images':['https://farm2.staticflickr.com/1623/25395662282_942fd68ba3_o.jpg',
    'https://farm2.staticflickr.com/1458/25395661442_bfd783f18a_o.jpg',
    'https://farm2.staticflickr.com/1641/25421381351_38390bcb8e_o.jpg',
    'https://farm2.staticflickr.com/1616/25514167315_b19b0a4365_o.jpg',
    'https://farm2.staticflickr.com/1482/24883160354_b03cefd416_o.jpg',
    'https://farm2.staticflickr.com/1653/25420915781_8fc648b4a4_o.jpg',
    'https://farm2.staticflickr.com/1610/25486858116_9c06dfea59_o.jpg',
    'https://farm2.staticflickr.com/1617/25168697841_00dfff89bb_o.jpg',
    'https://farm2.staticflickr.com/1533/24631230904_83b1624807_o.jpg',
    'https://farm2.staticflickr.com/1627/25145624551_1b8743116f_o.jpg',
    'https://farm2.staticflickr.com/1622/25120540712_7fc1a5ed72_o.jpg',
    'https://farm2.staticflickr.com/1550/24585667074_aa712b13a8_o.jpg']},
    'details':'Second launch of the enhanced Falcon 9 Full Thrust launch vehicle. Following the launch,',
    'upcoming':false,
    'static_fire_date_utc':'2016-10-02T14:11:00.000Z',
    'static_fire_date_unix':1475417460,
    'timeline':{'webcast_liftoff':600,
    'go_for_prop_loading':-2280,
    'rp1_loading':-2100,
    'stage1_lox_loading':-2100,
    'stage2_lox_loading':-960,
    'engine_chill':-420,
    'prelaunch_checks':-60,
    'propellant_pressurization':-60,
    'go_for_launch':-45,
    'ignition':-3,
    'liftoff':0,
    'maxq':60,
    'meco':156,
    'stage_sep':160,
    'second_stage_ignition':1627,
    'fairing_deploy':222,
    'seco-1':541,
    'second_stage_restart':1627,
    'seco-2':1675,
    'payload_deploy':1884},
    'crew':null},
    {'flight_number':31,
    'mission_name':'ABS-2A / Eutelsat 117W B',
    'mission_id':['2CF444A',
    'F7709F2'],
    'launch_year':'2016',
    'launch_date_unix':1466000940,
    'launch_date_utc':'2016-06-15T14:29:00.000Z',
    'launch_date_local':'2016-06-15T10:29:00-04:00',
    'is_tentative':false,
    'tentative_max_precision':'hour',
    'tbd':false,
    'launch_window':2700,
    'rocket':{'rocket_id':'falcon9',
    'rocket_name':'Falcon 9',
    'rocket_type':'FT',
    'first_stage':{'cores':[{'core_serial':'B1024',
    'flight':1,
    'block':2,
    'gridfins':true,
    'legs':true,
    'reused':false,
    'land_success':false,
    'landing_intent':true,
    'landing_type':'ASDS',
    'landing_vehicle':'OCISLY'}]},
    'second_stage':{'block':2,
    'payloads':[{'payload_id':'ABS-2A',
    'norad_id':[41588],
    'reused':false,
    'customers':['ABS'],
    'nationality':'Hong Kong',
    'manufacturer':'Boeing',
    'payload_type':'Satellite',
    'payload_mass_kg':1800,
    'payload_mass_lbs':3950,
    'orbit':'GTO',
    'orbit_params':{'reference_system':'geocentric',
    'regime':'geostationary',
    'longitude':75,
    'semi_major_axis_km':42165.182,
    'eccentricity':0.0000994,
    'periapsis_km':35782.855,
    'apoapsis_km':35791.238,
    'inclination_deg':0.0161,
    'period_min':1436.119,
    'lifespan_years':15,
    'epoch':'2020-12-21T03:09:59.000Z',
    'mean_motion':1.00270179,
    'raan':355.8796,
    'arg_of_pericenter':235.0583,
    'mean_anomaly':341.4245}},
    {'payload_id':'Eutelsat 117 West B',
    'norad_id':[40425],
    'reused':false,
    'customers':['Eutelsat'],
    'nationality':'France',
    'manufacturer':'Boeing',
    'payload_type':'Satellite',
    'payload_mass_kg':1800,
    'payload_mass_lbs':3950,
    'orbit':'GTO',
    'orbit_params':{'reference_system':'geocentric',
    'regime':'geostationary',
    'longitude':-116.8,
    'semi_major_axis_km':null,
    'eccentricity':null,
    'periapsis_km':null,
    'apoapsis_km':null,
    'inclination_deg':null,
    'period_min':null,
    'lifespan_years':15,
    'epoch':null,
    'mean_motion':null,
    'raan':null}}]},
    'fairings':{'reused':false,
    'recovery_attempt':false,
    'recovered':false,
    'ship':null}},
    'ships':['ELSBETH3',
    'GOQUEST',
    'GOSEARCHER',
    'OCISLY'],
    'telemetry':{'flight_club':'https://www.flightclub.io/results/?code=EUA2'},
    'launch_site':{'site_id':'ccafs_slc_40',
    'site_name':'CCAFS SLC 40',
    'site_name_long':'Cape Canaveral Air Force Station Space Launch Complex 40'},
    'launch_success':true,
    'links':{'mission_patch':'https://images2.imgbox.com/07/79/4ajR03l9_o.png',
    'mission_patch_small':'https://images2.imgbox.com/ae/e9/VTH2y7S5_o.png',
    'reddit_campaign':'https://www.reddit.com/r/spacex/comments/4ksdy3',
    'reddit_launch':'https://www.reddit.com/r/spacex/comments/4o5u6r',
    'reddit_recovery':'https://www.reddit.com/r/spacex/comments/4on75l',
    'reddit_media':'https://www.reddit.com/r/spacex/comments/4o5j6o',
    'presskit':'https://drive.google.com/open?id=0BwA3a65ef1OvMGpJSlpDNHhjelU',
    'article_link':'https://spaceflightnow.com/2016/06/15/spacex-successfully-fires-satellites-into-orbit-but-loses-booster-on-landing/',
    'wikipedia':'https://en.wikipedia.org/wiki/ABS_(satellite_operator)',
    'video_link':'https://www.youtube.com/watch?v=gLNmtUEvI5A',
    'youtube_id':'gLNmtUEvI5A',
    'flickr_images':['https://farm8.staticflickr.com/7088/27661326426_ce3c3f320d_o.jpg',
    'https://farm8.staticflickr.com/7698/27661325446_affb08be24_o.jpg',
    'https://farm8.staticflickr.com/7733/27661322976_073466e80c_o.jpg',
    'https://farm8.staticflickr.com/7218/27661320706_4c16f3b76b_o.jpg',
    'https://farm8.staticflickr.com/7340/27661315686_6dcb2ce6f9_o.jpg',
    'https://farm8.staticflickr.com/7656/27661313956_e1ac9650b9_o.jpg',
    'https://farm8.staticflickr.com/7616/27661312516_640764f8fd_o.jpg',
    'https://farm8.staticflickr.com/7413/27078893234_0142dd80f0_o.jpg',
    'https://farm8.staticflickr.com/7334/27078889924_8819fd55ea_o.jpg']},
    'details':'One year after pioneering this technique on flight 16',
    'upcoming':false,
    'static_fire_date_utc':'2016-06-13T15:03:00.000Z',
    'static_fire_date_unix':1465830180,
    'timeline':{'webcast_liftoff':1079,
    'go_for_prop_loading':-2280,
    'rp1_loading':-2100,
    'stage1_lox_loading':-2100,
    'stage2_lox_loading':-960,
    'engine_chill':-420,
    'prelaunch_checks':-60,
    'propellant_pressurization':-60,
    'go_for_launch':-45,
    'ignition':-3,
    'liftoff':0,
    'maxq':77,
    'meco':156,
    'stage_sep':159,
    'second_stage_ignition':167,
    'fairing_deploy':2129,
    'seco-1':562,
    'second_stage_restart':1554,
    'seco-2':1618,
    'payload_deploy_1':1829,
    'payload_deploy_2':2129},
    'crew':null
    }];

  let service: ApiService;
  let httpClientSpy: any;

  beforeEach(() => {
    httpClientSpy = jasmine.createSpyObj('HttpClient', ['get']);
    TestBed.configureTestingModule({});
    service = new ApiService(httpClientSpy, new UrlService());
  });

  it('should be created', () => {
    expect(service).toBeTruthy();
  });

  it('should return all records', () => {
    httpClientSpy.get.and.returnValue(from(mockData));
    expect(service.getAllPrograms()).toBeDefined();
  });
});
